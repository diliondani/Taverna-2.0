<!doctype html>
<html>
<!-- AMP Web Push Permission Dialog -->

<head>
  <meta charset="utf-8">

  <!-- Do not edit styles in this section -->
  <style builtin>
    /* Do not edit styles in this section. Add custom styles in the next
       style section */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    /* Default loading spinner */
    .spinner,
    .spinner:after {
      border-radius: 50%;
      width: 10em;
      height: 10em;
    }
    .spinner {
      margin: 60px auto;
      font-size: 10px;
      position: relative;
      text-indent: -9999em;
      border-top: 1.1em solid rgba(140, 140, 140, 0.2);
      border-right: 1.1em solid rgba(140, 140, 140, 0.2);
      border-bottom: 1.1em solid rgba(140, 140, 140, 0.2);
      border-left: 1.1em solid rgb(140, 140, 140);
      -webkit-transform: translateZ(0);
      -ms-transform: translateZ(0);
      transform: translateZ(0);
      -webkit-animation: spinner 1.1s infinite linear;
      animation: spinner 1.1s infinite linear;
    }
    @-webkit-keyframes spinner {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
    @keyframes spinner {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    /* Horizontally and vertically center items */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
    }

    /* Page message text styles */
    .message {
      font-size: 22px;
      font-family: sans-serif;
      text-align: center;
    }

    /* Close icon styles */
    #close {
      position: fixed;
      right: 32px;
      top: 32px;
      width: 32px;
      height: 32px;
      opacity: 0.5;
      cursor: pointer;
    }
    #close:before, #close:after {
      position: fixed;
      right: 48px;
      content: ' ';
      height: 33px;
      width: 3px;
      background-color: #333;
    }
    #close:before {
      transform: rotate(45deg);
    }
    #close:after {
      transform: rotate(-45deg);
    }

    /* Used to hide the preload and postload sections */
    .invisible {
      display: none;
    }
  </style>

  <!-- Optional: Add custom styles here -->
  <style custom>
    /* Add custom styles here */
  </style>
</head>
<body>
  <div id="preload">
    <!-- Anything in this section will be shown before the main script
          runs, and will be hidden after -->
    <div class="spinner"></div>
  </div>
  <div id="postload" class="invisible">
    <span id="close"></span>
    <div permission="default">
      <p class="message">
        <!--
        Customize the subscribing message here
            (e.g. "Click Allow to receive notifications")
        -->
        Click Allow to receive notifications.
      </p>
    </div>
    <div permission="denied">
      <!--
        Customize the unblocking message here
            (e.g. "Please unblock notifications in your browser settings
                    to receive notifications from this website.")
        -->
      <p class="message">
        Please unblock notifications in your browser settings to receive notifications from this website.
      </p>
    </div>
  </div>
  <script>(function(){var f,h=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a}(this);function l(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return b}};var m=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;self.log=self.log||{user:null,dev:null,userForEmbed:null};var n,p;
function q(a){var b;n||(n=self.document.createElement("a"),p=self.UrlCache||(self.UrlCache=Object.create(null)));var d=p[a];if(d)return d;var c=n;c.href=a;c.protocol||(c.href=c.href);var e={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=c.origin&&
"null"!=c.origin?c.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;var g=e,k=g;return b?k:p[a]=k};function t(a){a||(a={debug:!1,windowContext:window});this.l={};this.j={};this.D=a.debug;this.m=this.H=this.I=!1;this.o=this.A=this.B=this.h=this.w=null;this.c=a.windowContext||window}f=t.prototype;
f.listen=function(a){var b=this;return(new Promise(function(d,c){b.m?c(Error("Already connected.")):b.I?c(Error("Already listening for connections.")):Array.isArray(a)?(b.B=b.K.bind(b,a,d,c),b.c.addEventListener("message",b.B)):c(Error("allowedOrigins should be a string array of allowed origins to accept messages from. Got:",a))})).then(function(){b.send(t.Topics.CONNECT_HANDSHAKE,null);b.m=!0})};
f.K=function(a,b,d,c){var e=c.data,g=c,k=g.ports;a:{for(var g=q(g.origin).origin,r=0;r<a.length;r++)if(q(a[r]).origin===g){a=!0;break a}a=!1}a&&e&&e.topic===t.Topics.CONNECT_HANDSHAKE&&(this.c.removeEventListener("message",this.B),this.h=k[0],this.o=this.F.bind(this),this.h.addEventListener("message",this.o,!1),this.h.start(),b())};
f.connect=function(a,b){var d=this;return new Promise(function(c,e){a||e(Error("Provide a valid Window context to connect to."));b||e(Error("Provide an expected origin for the remote Window or provide the wildcard *."));d.m?e(Error("Already connected.")):d.H?e(Error("Already connecting.")):(d.w=new MessageChannel,d.h=d.w.port1,d.A=d.J.bind(d,d.h,b,c),d.h.addEventListener("message",d.A),d.h.start(),a.postMessage({topic:t.Topics.CONNECT_HANDSHAKE},"*"===b?"*":q(b).origin,[d.w.port2]))})};
f.J=function(a,b,d){this.m=!0;a.removeEventListener("message",this.A);this.o=this.F.bind(this);a.addEventListener("message",this.o,!1);d()};f.F=function(a){a=a.data;if(this.l[a.id]&&a.isReply){var b=this.l[a.id];delete this.l[a.id];var d=b.promiseResolver;b.message=a.data;d([a.data,this.G.bind(this,a.id,b.topic)])}else{var c=this.j[a.topic];if(c)for(var e=0;e<c.length;e++)(0,c[e])(a.data,this.G.bind(this,a.id,a.topic))}};f.on=function(a,b){this.j[a]?this.j[a].push(b):this.j[a]=[b]};
f.off=function(a,b){if(b){var d=this.j[a].indexOf(b);-1!==d&&this.j[a].splice(d,1)}else this.j[a]&&delete this.j[a]};f.G=function(a,b,d){var c=this,e={id:a,topic:b,data:d,isReply:!0};this.h.postMessage(e);return new Promise(function(a){c.l[e.id]={message:d,topic:b,promiseResolver:a}})};f.send=function(a,b){var d=this,c={id:crypto.getRandomValues(new Uint8Array(10)).join(""),topic:a,data:b};this.h.postMessage(c);return new Promise(function(e){d.l[c.id]={message:b,topic:a,promiseResolver:e}})};
h.Object.defineProperties(t,{Topics:{configurable:!0,enumerable:!0,get:function(){return{CONNECT_HANDSHAKE:"topic-connect-handshake",NOTIFICATION_PERMISSION_STATE:"topic-notification-permission-state",SERVICE_WORKER_STATE:"topic-service-worker-state",SERVICE_WORKER_REGISTRATION:"topic-service-worker-registration",SERVICE_WORKER_QUERY:"topic-service-worker-query",STORAGE_GET:"topic-storage-get"}}}});function u(a){this.D=a&&a.debug;this.c=a.windowContext||window;this.C=new t({debug:this.D,windowContext:this.c})}f=u.prototype;f.isCurrentDialogPopup=function(){return!!this.c.opener&&this.c.opener!==this.c};f.requestNotificationPermission=function(){var a=this;return new Promise(function(b,d){try{a.c.Notification.requestPermission(function(a){return b(a)})}catch(c){d(c)}})};
f.run=function(){v(this);w(this);for(var a=this.c.document.querySelectorAll("[permission]"),b=0;b<a.length;b++)x(a[b],!1);(a=this.c.document.querySelector("[permission="+this.c.Notification.permission+"]"))&&x(a,!0);a=this.c.document.querySelector("#preload");b=this.c.document.querySelector("#postload");a&&b&&(x(a,!1),x(b,!0));"denied"!==this.c.Notification.permission?y(this):z(this)};
function v(a){var b=a.c.document.querySelector("#close");b&&b.addEventListener("click",function(){a.closeDialog()})}f.closeDialog=function(){if(this.isCurrentDialogPopup())this.c.close();else{var a=this.c.fakeLocation||this.c.location;var b=a.search,d=Object.create(null);if(b)for(var c;c=m.exec(b);){var e=l(c[1],c[1]);c=c[2]?l(c[2],c[2]):"";d[e]=c}var g=d;if(!g["return"])throw Error("Missing required parameter.");var k=l(g["return"],void 0);this.redirectToUrl(k)}};
function z(a){navigator.permissions.query({name:"notifications"}).then(function(b){b.onchange=function(){w(a);switch(a.c.Notification.permission){case "default":case "granted":y(a)}}})}function w(a){a.c.localStorage.setItem("amp-web-push-notification-permission",a.c.Notification.permission)}function x(a,b){if(a){var d="invisible";b?a.classList.remove(d):a.classList.add(d)}}
function y(a){a.requestNotificationPermission().then(function(b){w(a);if(a.isCurrentDialogPopup())return a.C.connect(opener,"*"),a.C.send(t.Topics.NOTIFICATION_PERMISSION_STATE,b).then(function(b){var c=b[0];c&&c.closeFrame&&a.closeDialog()});a.closeDialog()})}f.redirectToUrl=function(a){var b=q(a);!b||"http:"!==b.protocol&&"https:"!==b.protocol||(this.c.location.href=a)};window._ampWebPushPermissionDialog=new u({debug:!1});window._ampWebPushPermissionDialog.run();})();
//# sourceMappingURL=amp-web-push-permission-dialog.js.map

</script>
</body>
</html>
